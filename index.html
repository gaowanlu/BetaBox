<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="./Open.js"></script>
</head>
<body>
    <div id="app">

    </div>
</body>
<script>
    function defineReact(obj, key, node){
        Object.defineProperty(obj, key, {
            set: function(newValue){
                node[key] = newValue;
            },
            get: function(){
                return node;
            }
        });
    }
    function observe(vn, node){
        Object.keys(vn).forEach((vn_key) => {
            defineReact(vn, vn_key, node);
        })
    }

    let vn={
        innerHTML:"123456789",
        style:""
    };


    let node=Open.select("#app");
    observe(vn,node);
    vn.innerHTML="[123456789]";
    vn.style="color:red;";


    function vnode(tag){
        let newnode={
            dom_node:Open.createNode(tag),
            tag:tag,
            props:{},
            childs:[],
        };
        for(let key in newnode.dom_node){
            let type=typeof(newnode.dom_node[key]);
            if(type=="object"){
                newnode.props[key]=Object.assign({},newnode.dom_node[key]);
            }else{
                newnode.props[key]=newnode.dom_node[key];
            }
        }
        return newnode;
    }
    

</script>
</html>
